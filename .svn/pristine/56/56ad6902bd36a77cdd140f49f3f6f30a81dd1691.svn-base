//
//  OptimizationEntrustVC.m
//  YuanXin_Project
//
//  Created by Yuanin on 16/5/4.
//  Copyright © 2016年 yuanxin. All rights reserved.
//

#import "OptimizationEntrustVC.h"

#import "WebVC.h"

#import "LimitTextField.h"
#import "PickerAccessoryView.h"
#import "SinglePickerView.h"

#import "BaseViewModel.h"

@interface OptimizationEntrustVC ()

@property (strong, nonatomic) NSArray *dataArr;
@property (strong, nonatomic) BaseViewModel *baseViewModel;




@end

@implementation OptimizationEntrustVC

- (void)viewDidLoad {
    [super viewDidLoad];
    // Do any additional setup after loading the view.
    
    [self layoutNavigationLeftButtonWithImage:[UIImage imageNamed:Nav_Back_Image] block:^(__kindof UIViewController *viewController) {
        [viewController.navigationController popViewControllerAnimated:YES];
    }];
    
    [self fetchOptimizationEntrustInfo];
}
- (void)viewDidDisappear:(BOOL)animated {
    [super viewDidDisappear:animated];
    
    [self.baseViewModel cancelFetchOperation];
}

#pragma mark - action



#pragma mark - private
- (void)fetchOptimizationEntrustInfo {

    
    [BaseIndicatorView showInView:self.view  maskType:kIndicatorNoMask];
    @weakify(self)
    [self.baseViewModel postMethod:@"getentrustpreferredparameter" params:[[UserinfoManager sharedUserinfo] increaseUserParams:nil] success:^(id result) {
        @strongify(self)
        
        [BaseIndicatorView hideWithAnimation:self.didShow];
        self.dataArr = result[RESULT_DATA];
    } failure:^(id result, NSString *errorDescription) {
        @strongify(self)
        
        [BaseIndicatorView hideWithAnimation:self.didShow];
        [SpringAlertView showMessage:errorDescription];
    }];
}

#pragma mark - getter
- (BaseViewModel *)baseViewModel {
    if (!_baseViewModel) {
        _baseViewModel = [[BaseViewModel alloc] init];
    }
    return _baseViewModel;
}
@end
